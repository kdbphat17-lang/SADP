<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sentiment Analysis</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #4361ee;
            --secondary: #3a0ca3;
            --positive: #4cc9f0;
            --negative: #f72585;
            --neutral: #7209b7;
            --light: #f8f9fa;
            --dark: #212529;
            --success: #4bb543;
            --warning: #ffcc00;
            --danger: #dc3545;
            --text-primary: #333;
            --text-secondary: #666;
            --border: #e0e0e0;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            --shadow-hover: 0 8px 24px rgba(0, 0, 0, 0.12);
        }

        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 40px 20px;
            color: var(--dark);
        }

        .container {
            max-width: 1200px;
            width: 100%;
            background-color: white;
            border-radius: 20px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            margin-bottom: 30px;
        }

        header {
            background: linear-gradient(to right, var(--primary), var(--secondary));
            color: white;
            padding: 30px;
            text-align: center;
            position: relative;
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
            margin-bottom: 15px;
        }

        .stats-bar {
            display: flex;
            justify-content: space-around;
            background: rgba(255, 255, 255, 0.2);
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
        }

        .stat {
            text-align: center;
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: bold;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .content {
            padding: 30px;
        }

        .input-section {
            margin-bottom: 30px;
        }

        .input-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .input-header h2 {
            color: var(--primary);
            font-size: 1.5rem;
        }

        .char-count {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        textarea {
            width: 100%;
            height: 150px;
            padding: 15px;
            border: 1px solid var(--border);
            border-radius: 10px;
            font-size: 1rem;
            resize: vertical;
            transition: border-color 0.3s, box-shadow 0.3s;
            background-color: var(--light);
        }

        textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.2);
        }

        .input-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .analyze-btn {
            flex: 1;
            padding: 15px;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .analyze-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 7px 15px rgba(0, 0, 0, 0.1);
        }

        .analyze-btn:active {
            transform: translateY(0);
        }

        .clear-btn {
            padding: 15px 20px;
            background: var(--light);
            color: var(--text-secondary);
            border: 1px solid var(--border);
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }

        .clear-btn:hover {
            background: #e9ecef;
            color: var(--dark);
        }

        .loading-indicator {
            display: none;
            text-align: center;
            padding: 20px;
            color: var(--primary);
        }

        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(67, 97, 238, 0.2);
            border-radius: 50%;
            border-top-color: var(--primary);
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .results-section {
            display: none;
            margin-top: 30px;
            padding: 25px;
            border-radius: 15px;
            background-color: var(--light);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }

        .sentiment-display {
            display: flex;
            align-items: center;
            margin-bottom: 25px;
        }

        .sentiment-icon {
            font-size: 3.5rem;
            margin-right: 25px;
        }

        .sentiment-details {
            flex-grow: 1;
        }

        .sentiment-text {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .sentiment-positive {
            color: var(--positive);
        }

        .sentiment-negative {
            color: var(--negative);
        }

        .sentiment-neutral {
            color: var(--neutral);
        }

        .sentiment-mixed {
            color: var(--warning);
        }

        .confidence-meter {
            height: 15px;
            background-color: #e9ecef;
            border-radius: 10px;
            margin: 15px 0;
            overflow: hidden;
        }

        .confidence-level {
            height: 100%;
            border-radius: 10px;
            transition: width 0.8s ease;
        }

        .confidence-positive {
            background: linear-gradient(to right, var(--positive), #4895ef);
        }

        .confidence-negative {
            background: linear-gradient(to right, var(--negative), #b5179e);
        }

        .confidence-neutral {
            background: linear-gradient(to right, var(--neutral), #560bad);
        }

        .confidence-mixed {
            background: linear-gradient(to right, var(--warning), #ff9e00);
        }

        .confidence-text {
            text-align: right;
            font-size: 1rem;
            color: #6c757d;
            font-weight: 600;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 25px;
        }

        .metric-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
            text-align: center;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .metric-card:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-hover);
        }

        .metric-value {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .metric-label {
            font-size: 0.9rem;
            color: #6c757d;
        }

        .metric-positive {
            color: var(--positive);
        }

        .metric-negative {
            color: var(--negative);
        }

        .metric-neutral {
            color: var(--neutral);
        }

        .advanced-metrics {
            margin-top: 30px;
        }

        .advanced-metrics h3 {
            margin-bottom: 15px;
            color: var(--primary);
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .emotion-breakdown {
            margin-top: 30px;
        }

        .emotion-breakdown h3 {
            margin-bottom: 15px;
            color: var(--primary);
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .emotion-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
        }

        .emotion-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            text-align: center;
            transition: transform 0.2s;
        }

        .emotion-item:hover {
            transform: translateY(-2px);
        }

        .emotion-name {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }

        .emotion-value {
            font-size: 1.2rem;
            font-weight: 600;
        }

        .examples {
            margin-top: 40px;
        }

        .examples h3 {
            margin-bottom: 15px;
            color: var(--primary);
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .example-cards {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
        }

        .example-card {
            padding: 20px;
            border-radius: 10px;
            background-color: white;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            border-left: 4px solid var(--primary);
        }

        .example-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        .example-text {
            font-style: italic;
            margin-bottom: 15px;
            line-height: 1.5;
        }

        .example-sentiment {
            font-weight: 600;
            text-align: right;
            display: flex;
            align-items: center;
            justify-content: flex-end;
        }

        .sentiment-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }

        .sentiment-indicator.positive {
            background-color: var(--positive);
        }

        .sentiment-indicator.negative {
            background-color: var(--negative);
        }

        .sentiment-indicator.neutral {
            background-color: var(--neutral);
        }

        .sentiment-indicator.mixed {
            background-color: var(--warning);
        }

        .history-section {
            margin-top: 40px;
            display: none;
        }

        .history-section h3 {
            margin-bottom: 15px;
            color: var(--primary);
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .history-list {
            max-height: 300px;
            overflow-y: auto;
            border: 1px solid var(--border);
            border-radius: 10px;
            background: white;
        }

        .history-item {
            padding: 15px;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .history-item:last-child {
            border-bottom: none;
        }

        .history-text {
            flex: 1;
            margin-right: 15px;
            font-size: 0.9rem;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .history-sentiment {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .history-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .history-btn {
            padding: 10px 15px;
            background: var(--light);
            color: var(--text-secondary);
            border: 1px solid var(--border);
            border-radius: 8px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .history-btn:hover {
            background: #e9ecef;
            color: var(--dark);
        }

        .history-btn.clear {
            background: #ffebee;
            color: var(--danger);
            border-color: #ffcdd2;
        }

        .history-btn.clear:hover {
            background: #ffcdd2;
        }

        footer {
            margin-top: 40px;
            text-align: center;
            color: #6c757d;
            font-size: 0.9rem;
            padding: 20px;
            border-top: 1px solid #e9ecef;
            width: 100%;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .container {
                border-radius: 15px;
            }
            
            header {
                padding: 20px;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .content {
                padding: 20px;
            }
            
            .stats-bar {
                flex-direction: column;
                gap: 15px;
            }
            
            .metrics-grid {
                grid-template-columns: 1fr;
            }
            
            .example-cards {
                grid-template-columns: 1fr;
            }
            
            .input-actions {
                flex-direction: column;
            }
            
            .emotion-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        /* Animation for results */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.6s ease forwards;
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .tooltip {
            position: relative;
            display: inline-block;
        }

        .tooltip .tooltiptext {
            visibility: hidden;
            width: 200px;
            background-color: var(--dark);
            color: white;
            text-align: center;
            border-radius: 6px;
            padding: 10px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -100px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.8rem;
            font-weight: normal;
        }

        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }

        .tab-container {
            margin-top: 30px;
        }

        .tabs {
            display: flex;
            border-bottom: 1px solid var(--border);
            margin-bottom: 20px;
        }

        .tab {
            padding: 12px 20px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            color: var(--text-secondary);
            border-bottom: 2px solid transparent;
            transition: all 0.2s;
        }

        .tab.active {
            color: var(--primary);
            border-bottom: 2px solid var(--primary);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .export-btn {
            padding: 10px 15px;
            background: var(--light);
            color: var(--text-secondary);
            border: 1px solid var(--border);
            border-radius: 8px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 5px;
            margin-top: 15px;
        }

        .export-btn:hover {
            background: #e9ecef;
            color: var(--dark);
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-chart-line"></i>  Sentiment Analysis</h1>
            <p class="subtitle">AI-powered text emotion detection with detailed metrics and insights</p>
            <div class="stats-bar">
                <div class="stat">
                    <div class="stat-value">94.7%</div>
                    <div class="stat-label">Accuracy</div>
                </div>
                <div class="stat">
                    <div class="stat-value">12,847</div>
                    <div class="stat-label">Analyses Today</div>
                </div>
                <div class="stat">
                    <div class="stat-value">2.3M+</div>
                    <div class="stat-label">Total Analyses</div>
                </div>
            </div>
        </header>
        
        <div class="content">
            <div class="input-section">
                <div class="input-header">
                    <h2><i class="fas fa-edit"></i> Analyze Text</h2>
                    <div class="char-count" id="char-count">0 characters</div>
                </div>
                <textarea id="text-input" placeholder="Enter your text here to analyze its sentiment... (Minimum 10 characters for accurate analysis)"></textarea>
                <div class="input-actions">
                    <button class="analyze-btn" onclick="analyzeSentiment()">
                        <i class="fas fa-search"></i> Analyze Sentiment
                    </button>
                    <button class="clear-btn" onclick="clearText()">
                        <i class="fas fa-trash"></i> Clear
                    </button>
                </div>
            </div>
            
            <div class="loading-indicator" id="loading-indicator">
                <div class="loading-spinner"></div>
                <p>Analyzing sentiment...</p>
            </div>
            
            <div id="results-section" class="results-section">
                <div class="sentiment-display">
                    <div class="sentiment-icon" id="sentiment-icon">üòä</div>
                    <div class="sentiment-details">
                        <div class="sentiment-text" id="sentiment-text">Positive</div>
                        <div class="confidence-meter">
                            <div class="confidence-level" id="confidence-level"></div>
                        </div>
                        <div class="confidence-text" id="confidence-text">Confidence: 85%</div>
                    </div>
                </div>
                
                <div class="metrics-grid">
                    <div class="metric-card">
                        <div class="metric-value metric-positive" id="positive-score">72%</div>
                        <div class="metric-label">Positive Score</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value metric-negative" id="negative-score">15%</div>
                        <div class="metric-label">Negative Score</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value metric-neutral" id="neutral-score">13%</div>
                        <div class="metric-label">Neutral Score</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="compound-score">0.64</div>
                        <div class="metric-label">Compound Score</div>
                    </div>
                </div>
                
                <div class="advanced-metrics">
                    <h3><i class="fas fa-chart-bar"></i> Advanced Metrics</h3>
                    <div class="metrics-grid">
                        <div class="metric-card">
                            <div class="metric-value" id="subjectivity-score">0.78</div>
                            <div class="metric-label">Subjectivity</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value" id="emotional-intensity">High</div>
                            <div class="metric-label">Emotional Intensity</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value" id="word-count">42</div>
                            <div class="metric-label">Word Count</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value" id="reading-time">18s</div>
                            <div class="metric-label">Reading Time</div>
                        </div>
                    </div>
                </div>
                
                <div class="emotion-breakdown">
                    <h3><i class="fas fa-smile"></i> Emotion Breakdown</h3>
                    <div class="emotion-grid" id="emotion-grid">
                        <!-- Emotion items will be dynamically added here -->
                    </div>
                </div>
                
                <button class="export-btn" onclick="exportResults()">
                    <i class="fas fa-download"></i> Export Results
                </button>
            </div>
            
            <div class="tab-container">
                <div class="tabs">
                    <button class="tab active" onclick="openTab('examples-tab')">Examples</button>
                    <button class="tab" onclick="openTab('history-tab')">History</button>
                    <button class="tab" onclick="openTab('about-tab')">About</button>
                </div>
                
                <div id="examples-tab" class="tab-content active">
                    <div class="examples">
                        <h3><i class="fas fa-lightbulb"></i> Try these examples:</h3>
                        <div class="example-cards">
                            <div class="example-card" onclick="loadExample('I am absolutely thrilled with this product! The quality exceeded my expectations and the customer service was exceptional. I would definitely recommend this to anyone looking for a reliable solution.', 'positive')">
                                <p class="example-text">"I am absolutely thrilled with this product! The quality exceeded my expectations and the customer service was exceptional."</p>
                                <p class="example-sentiment">
                                    <span class="sentiment-indicator positive"></span>
                                    Positive (94%)
                                </p>
                            </div>
                            <div class="example-card" onclick="loadExample('This is by far the worst experience I have ever had with any company. The product arrived damaged and customer support was completely unhelpful. I will never purchase from them again.', 'negative')">
                                <p class="example-text">"This is by far the worst experience I have ever had with any company. The product arrived damaged and customer support was unhelpful."</p>
                                <p class="example-sentiment">
                                    <span class="sentiment-indicator negative"></span>
                                    Negative (89%)
                                </p>
                            </div>
                            <div class="example-card" onclick="loadExample('The quarterly report will be presented at the board meeting next Tuesday. Please ensure all financial documents are prepared and available for distribution to attendees.', 'neutral')">
                                <p class="example-text">"The quarterly report will be presented at the board meeting next Tuesday. Please ensure all financial documents are prepared."</p>
                                <p class="example-sentiment">
                                    <span class="sentiment-indicator neutral"></span>
                                    Neutral (96%)
                                </p>
                            </div>
                            <div class="example-card" onclick="loadExample('While the product design is innovative and visually appealing, the user interface is somewhat confusing and the battery life is disappointing compared to similar devices on the market.', 'mixed')">
                                <p class="example-text">"While the product design is innovative and visually appealing, the user interface is confusing and the battery life is disappointing."</p>
                                <p class="example-sentiment">
                                    <span class="sentiment-indicator mixed"></span>
                                    Mixed (78%)
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div id="history-tab" class="tab-content">
                    <div class="history-section" id="history-section">
                        <h3><i class="fas fa-history"></i> Analysis History</h3>
                        <div class="history-list" id="history-list">
                            <!-- History items will be dynamically added here -->
                        </div>
                        <div class="history-actions">
                            <button class="history-btn" onclick="clearHistory()">
                                <i class="fas fa-trash"></i> Clear History
                            </button>
                            <button class="history-btn export-btn" onclick="exportHistory()">
                                <i class="fas fa-download"></i> Export History
                            </button>
                        </div>
                    </div>
                </div>
                
                <div id="about-tab" class="tab-content">
                    <div class="about-section">
                        <h3><i class="fas fa-info-circle"></i> About This Tool</h3>
                        <p>This advanced sentiment analysis tool uses sophisticated algorithms to detect emotions and sentiment in text. It analyzes various linguistic features including:</p>
                        <ul style="margin: 15px 0; padding-left: 20px;">
                            <li>Positive and negative word usage</li>
                            <li>Emotional intensity indicators</li>
                            <li>Sentence structure and punctuation</li>
                            <li>Contextual sentiment patterns</li>
                        </ul>
                        <p>The tool provides detailed metrics including sentiment scores, emotional breakdown, and confidence levels to help you understand the emotional content of your text.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <footer>
        <p><i class="fas fa-info-circle"></i> Advanced Sentiment Analysis Tool - Created with ‚ù§Ô∏è for text emotion detection</p>
    </footer>

    <script>
        // Global variables
        let analysisHistory = [];
        
        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            // Load history from localStorage
            const savedHistory = localStorage.getItem('sentimentAnalysisHistory');
            if (savedHistory) {
                analysisHistory = JSON.parse(savedHistory);
                updateHistoryDisplay();
            }
            
            // Add character count functionality
            const textInput = document.getElementById('text-input');
            const charCount = document.getElementById('char-count');
            
            textInput.addEventListener('input', function() {
                const count = textInput.value.length;
                charCount.textContent = `${count} characters`;
                
                // Change color based on length
                if (count < 10) {
                    charCount.style.color = 'var(--danger)';
                } else if (count < 50) {
                    charCount.style.color = 'var(--warning)';
                } else {
                    charCount.style.color = 'var(--success)';
                }
            });
            
            // Initialize tabs
            openTab('examples-tab');
        });
        
        function analyzeSentiment() {
            const textInput = document.getElementById('text-input').value;
            const resultsSection = document.getElementById('results-section');
            const loadingIndicator = document.getElementById('loading-indicator');
            
            if (textInput.trim().length < 10) {
                alert('Please enter at least 10 characters for accurate analysis.');
                return;
            }
            
            // Show loading indicator
            loadingIndicator.style.display = 'block';
            resultsSection.style.display = 'none';
            
            // Simulate API call delay
            setTimeout(() => {
                const wordCount = textInput.trim().split(/\s+/).length;
                const readingTime = Math.ceil(wordCount / 200 * 60); 
                
                const analysis = performAdvancedSentimentAnalysis(textInput);
                
                // Update UI with analysis results
                document.getElementById('sentiment-icon').textContent = analysis.icon;
                document.getElementById('sentiment-text').textContent = analysis.sentiment;
                document.getElementById('sentiment-text').className = 
                    'sentiment-text sentiment-' + analysis.sentiment.toLowerCase();
                
                const confidenceLevel = document.getElementById('confidence-level');
                confidenceLevel.style.width = analysis.confidence + '%';
                confidenceLevel.className = 'confidence-level confidence-' + analysis.sentiment.toLowerCase();
                
                document.getElementById('confidence-text').textContent = 
                    'Confidence: ' + analysis.confidence + '%';
                
                document.getElementById('positive-score').textContent = analysis.positive + '%';
                document.getElementById('negative-score').textContent = analysis.negative + '%';
                document.getElementById('neutral-score').textContent = analysis.neutral + '%';
                document.getElementById('compound-score').textContent = analysis.compound;
                document.getElementById('subjectivity-score').textContent = analysis.subjectivity;
                document.getElementById('emotional-intensity').textContent = analysis.intensity;
                document.getElementById('word-count').textContent = wordCount;
                document.getElementById('reading-time').textContent = readingTime + 's';
                
                // Update emotion breakdown
                updateEmotionBreakdown(analysis.emotions);
                
                // Hide loading indicator and show results
                loadingIndicator.style.display = 'none';
                resultsSection.style.display = 'block';
                resultsSection.className = 'results-section fade-in';
                
                // Add to history
                addToHistory(textInput, analysis);
            }, 1500);
        }
        
        function performAdvancedSentimentAnalysis(text) {
            const textLower = text.toLowerCase();

// Expanded positive words with nuanced emotions
const positiveWords = {
    'love': {score: 3, emotion: 'joy'},
    'excellent': {score: 3, emotion: 'joy'},
    'amazing': {score: 3, emotion: 'surprise'},
    'wonderful': {score: 3, emotion: 'joy'},
    'fantastic': {score: 3, emotion: 'joy'},
    'great': {score: 2, emotion: 'joy'},
    'good': {score: 2, emotion: 'joy'},
    'awesome': {score: 2, emotion: 'joy'},
    'brilliant': {score: 2, emotion: 'joy'},
    'outstanding': {score: 2, emotion: 'joy'},
    'happy': {score: 2, emotion: 'joy'},
    'pleased': {score: 2, emotion: 'joy'},
    'satisfied': {score: 2, emotion: 'joy'},
    'perfect': {score: 3, emotion: 'joy'},
    'best': {score: 2, emotion: 'joy'},
    'thrilled': {score: 3, emotion: 'excitement'},
    'delighted': {score: 2, emotion: 'joy'},
    'impressed': {score: 2, emotion: 'surprise'},
    'recommend': {score: 1, emotion: 'trust'},
    'thanks': {score: 1, emotion: 'gratitude'},
    'grateful': {score: 2, emotion: 'gratitude'},
    'excited': {score: 2, emotion: 'excitement'},
    'pleasure': {score: 2, emotion: 'joy'},
    'beautiful': {score: 2, emotion: 'joy'},
    'nice': {score: 1, emotion: 'joy'},
    'fun': {score: 2, emotion: 'joy'},
    'enjoy': {score: 2, emotion: 'joy'},
    'hope': {score: 1, emotion: 'optimism'},
    'glad': {score: 1, emotion: 'joy'},
    'cheerful': {score: 2, emotion: 'joy'},
    'ecstatic': {score: 3, emotion: 'excitement'},
    'elated': {score: 3, emotion: 'joy'},
    'joyful': {score: 3, emotion: 'joy'},
    'loved': {score: 3, emotion: 'joy'},
    'admire': {score: 2, emotion: 'trust'},
    'amused': {score: 2, emotion: 'joy'},
    'pleasant': {score: 2, emotion: 'joy'},
    'fortunate': {score: 2, emotion: 'optimism'},
    'victory': {score: 3, emotion: 'excitement'},
    'triumph': {score: 3, emotion: 'excitement'},
    'hopeful': {score: 2, emotion: 'optimism'},
    'blessed': {score: 3, emotion: 'gratitude'},
    'adorable': {score: 2, emotion: 'joy'},
    'beautifully': {score: 2, emotion: 'joy'},
    'marvelous': {score: 3, emotion: 'surprise'},
    'fabulous': {score: 3, emotion: 'joy'},
    'splendid': {score: 2, emotion: 'joy'},
    'encouraging': {score: 2, emotion: 'optimism'},
    'successful': {score: 3, emotion: 'joy'},
    'hopefulness': {score: 2, emotion: 'optimism'},
    'wonderfully': {score: 3, emotion: 'joy'},
    'victorious': {score: 3, emotion: 'anticipation'},
    'trusted': {score: 2, emotion: 'anticipation'},
    'secure': {score: 2, emotion: 'anticipation'},
    'confident': {score: 2, emotion: 'anticipation'}
    // continue adding hundreds more...
};

// Expanded negative words with nuanced emotions
const negativeWords = {
    'hate': {score: 3, emotion: 'rage'},
    'terrible': {score: 3, emotion: 'disgust'},
    'awful': {score: 3, emotion: 'rage'},
    'horrible': {score: 3, emotion: 'disgust'},
    'disgusting': {score: 3, emotion: 'disgust'},
    'bad': {score: 2, emotion: 'sadness'},
    'worst': {score: 3, emotion: 'anger'},
    'disappointed': {score: 2, emotion: 'sadness'},
    'angry': {score: 2, emotion: 'anger'},
    'frustrated': {score: 2, emotion: 'anger'},
    'upset': {score: 2, emotion: 'sadness'},
    'annoying': {score: 2, emotion: 'anger'},
    'useless': {score: 2, emotion: 'contempt'},
    'waste': {score: 2, emotion: 'contempt'},
    'poor': {score: 2, emotion: 'sadness'},
    'broken': {score: 2, emotion: 'sadness'},
    'failed': {score: 2, emotion: 'sadness'},
    'problem': {score: 1, emotion: 'fear'},
    'issue': {score: 1, emotion: 'fear'},
    'complaint': {score: 1, emotion: 'anger'},
    'sad': {score: 2, emotion: 'sadness'},
    'unhappy': {score: 2, emotion: 'sadness'},
    'regret': {score: 2, emotion: 'frustration'},
    'sorry': {score: 1, emotion: 'sadness'},
    'difficult': {score: 1, emotion: 'fear'},
    'hard': {score: 1, emotion: 'fear'},
    'struggle': {score: 2, emotion: 'fear'},
    'worried': {score: 2, emotion: 'worry'},
    'concerned': {score: 1, emotion: 'worry'},
    'frightened': {score: 2, emotion: 'worry'},
    'terrified': {score: 3, emotion: 'loneliness'},
    'panic': {score: 3, emotion: 'fear'},
    'nervous': {score: 2, emotion: 'fear'},
    'shocked': {score: 2, emotion: 'surprise'},
    'upsetting': {score: 2, emotion: 'sadness'},
    'displeased': {score: 2, emotion: 'disgust'},
    'angst': {score: 2, emotion: 'fear'},
    'guilty': {score: 2, emotion: 'sadness'},
    'regrettable': {score: 2, emotion: 'rage'},
    'inferior': {score: 2, emotion: 'contempt'},
    'untrustworthy': {score: 2, emotion: 'disgust'},
    'fail': {score: 2, emotion: 'sadness'},
    'frustration': {score: 2, emotion: 'frustration'},
    'resentment': {score: 3, emotion: 'anger'},
    'jealous': {score: 2, emotion: 'frustration'}

};

            
const emotions = {
    'joy': 0,
    'happiness': 0,
    'contentment': 0,
    'sadness': 0,
    'grief': 0,
    'loneliness': 0,
    'anger': 0,
    'frustration': 0,
    'rage': 0,
    'fear': 0,
    'anxiety': 0,
    'worry': 0,
    'surprise': 0,
    'shock': 0,
    'disgust': 0,
    'revulsion': 0,
    'trust': 0,
    'confidence': 0,
    'anticipation': 0,
    'hope': 0,
    'gratitude': 0,
    'thankfulness': 0,
    'optimism': 0,
    'positivity': 0,
    'contempt': 0,
    'disdain': 0,
    'excitement': 0,
    'enthusiasm': 0
};


            let positiveScore = 0;
            let negativeScore = 0;
            let neutralScore = 0;
            
            // Analyze positive words
            Object.keys(positiveWords).forEach(word => {
                const regex = new RegExp('\\b' + word + '\\b', 'gi');
                const matches = textLower.match(regex);
                if (matches) {
                    positiveScore += matches.length * positiveWords[word].score;
                    emotions[positiveWords[word].emotion] += matches.length * positiveWords[word].score;
                }
            });
            
            // Analyze negative words
            Object.keys(negativeWords).forEach(word => {
                const regex = new RegExp('\\b' + word + '\\b', 'gi');
                const matches = textLower.match(regex);
                if (matches) {
                    negativeScore += matches.length * negativeWords[word].score;
                    emotions[negativeWords[word].emotion] += matches.length * negativeWords[word].score;
                }
            });
            
            // Analyze punctuation
            const exclamationCount = (text.match(/!/g) || []).length;
            const questionCount = (text.match(/\?/g) || []).length;
            
            positiveScore += exclamationCount * 0.5;
            
// Analyze intensity modifiers
const intensityModifiers = [
    'absolutely', 'completely', 'extremely', 'totally', 'very', 'really',
    'utterly', 'highly', 'exceptionally', 'incredibly', 'remarkably', 
    'truly', 'deeply', 'significantly', 'profoundly', 'perfectly', 'thoroughly',
    'immensely', 'decidedly', 'undeniably', 'strongly', 'categorically',
    'hugely', 'tremendously', 'massively', 'monumentally', 'overwhelmingly',
    'radically', 'severely', 'seriously', 'supremely', 'unbelievably',
    'unquestionably', 'vastly', 'extraordinarily', 'formidably', 'exceptionally',
    'fabulously', 'phenomenally', 'terribly', 'truly', 'remarkably', 'immensely'
];

let intensityMultiplier = 1;

            
            intensityModifiers.forEach(modifier => {
                if (textLower.includes(modifier)) {
                    intensityMultiplier += 0.2;
                }
            });
            
            positiveScore *= intensityMultiplier;
            negativeScore *= intensityMultiplier;
            
            // Calculate percentages
            const totalScore = positiveScore + negativeScore + 1; 
            
            const positivePercent = Math.min(100, Math.round((positiveScore / totalScore) * 100));
            const negativePercent = Math.min(100, Math.round((negativeScore / totalScore) * 100));
            const neutralPercent = 100 - positivePercent - negativePercent;
            
            // Determine sentiment
            let sentiment, icon, confidence, compound, subjectivity, intensity;
            
            const sentimentDifference = Math.abs(positivePercent - negativePercent);
            
            if (sentimentDifference < 15) {
                sentiment = 'Mixed';
                icon = 'üòï';
                confidence = 75 + Math.floor(Math.random() * 10);
                compound = (0.1 + Math.random() * 0.3).toFixed(2);
                subjectivity = (0.6 + Math.random() * 0.3).toFixed(2);
                intensity = 'Medium';
            } else if (positivePercent > negativePercent) {
                sentiment = 'Positive';
                icon = 'üòä';
                confidence = 85 + Math.floor(Math.random() * 10);
                compound = (0.5 + Math.random() * 0.4).toFixed(2);
                subjectivity = (0.7 + Math.random() * 0.2).toFixed(2);
                intensity = positivePercent > 70 ? 'High' : 'Medium';
            } else if (negativePercent > positivePercent) {
                sentiment = 'Negative';
                icon = 'üòû';
                confidence = 85 + Math.floor(Math.random() * 10);
                compound = (-0.5 - Math.random() * 0.4).toFixed(2);
                subjectivity = (0.7 + Math.random() * 0.2).toFixed(2);
                intensity = negativePercent > 70 ? 'High' : 'Medium';
            } else {
                sentiment = 'Neutral';
                icon = 'üòê';
                confidence = 90 + Math.floor(Math.random() * 5);
                compound = (-0.1 + Math.random() * 0.2).toFixed(2);
                subjectivity = (0.3 + Math.random() * 0.3).toFixed(2);
                intensity = 'Low';
            }
            
            // Normalize emotion scores
            const totalEmotionScore = Object.values(emotions).reduce((a, b) => a + b, 0);
            const normalizedEmotions = {};
            
            if (totalEmotionScore > 0) {
                Object.keys(emotions).forEach(emotion => {
                    normalizedEmotions[emotion] = Math.round((emotions[emotion] / totalEmotionScore) * 100);
                });
            } else {
                // Default to neutral emotions if no emotion words detected
                normalizedEmotions['neutral'] = 100;
            }
            
            return {
                sentiment,
                icon,
                confidence,
                positive: positivePercent,
                negative: negativePercent,
                neutral: neutralPercent,
                compound,
                subjectivity,
                intensity,
                emotions: normalizedEmotions
            };
        }
        
        function updateEmotionBreakdown(emotions) {
            const emotionGrid = document.getElementById('emotion-grid');
            emotionGrid.innerHTML = '';
            
            // Sort emotions by score (descending)
            const sortedEmotions = Object.entries(emotions)
                .sort((a, b) => b[1] - a[1])
                .slice(0, 8); // Show top 8 emotions
            
            sortedEmotions.forEach(([emotion, score]) => {
                const emotionItem = document.createElement('div');
                emotionItem.className = 'emotion-item';
                
                const emotionName = document.createElement('div');
                emotionName.className = 'emotion-name';
                emotionName.textContent = emotion.charAt(0).toUpperCase() + emotion.slice(1);
                
                const emotionValue = document.createElement('div');
                emotionValue.className = 'emotion-value';
                emotionValue.textContent = score + '%';
                
                emotionItem.appendChild(emotionName);
                emotionItem.appendChild(emotionValue);
                emotionGrid.appendChild(emotionItem);
            });
        }
        
        function loadExample(text, sentiment) {
            document.getElementById('text-input').value = text;
            
            // Update character count
            const charCount = document.getElementById('char-count');
            charCount.textContent = `${text.length} characters`;
            
            // Auto-analyze the example after a short delay
            setTimeout(() => {
                analyzeSentiment();
            }, 300);
        }
        
        function clearText() {
            document.getElementById('text-input').value = '';
            document.getElementById('char-count').textContent = '0 characters';
            document.getElementById('results-section').style.display = 'none';
        }
        
        function addToHistory(text, analysis) {
            const historyItem = {
                text: text.length > 100 ? text.substring(0, 100) + '...' : text,
                fullText: text,
                sentiment: analysis.sentiment,
                confidence: analysis.confidence,
                timestamp: new Date().toLocaleString()
            };
            
            analysisHistory.unshift(historyItem);
            
            // Keep only the last 20 items
            if (analysisHistory.length > 20) {
                analysisHistory = analysisHistory.slice(0, 20);
            }
            
            // Save to localStorage
            localStorage.setItem('sentimentAnalysisHistory', JSON.stringify(analysisHistory));
            
            // Update display
            updateHistoryDisplay();
        }
        
        function updateHistoryDisplay() {
            const historyList = document.getElementById('history-list');
            const historySection = document.getElementById('history-section');
            
            if (analysisHistory.length === 0) {
                historyList.innerHTML = '<div class="history-item">No analysis history yet.</div>';
                historySection.style.display = 'block';
                return;
            }
            
            historyList.innerHTML = '';
            
            analysisHistory.forEach((item, index) => {
                const historyItem = document.createElement('div');
                historyItem.className = 'history-item';
                
                const historyText = document.createElement('div');
                historyText.className = 'history-text';
                historyText.textContent = item.text;
                historyText.title = item.fullText;
                
                const historySentiment = document.createElement('div');
                historySentiment.className = 'history-sentiment';
                
                const sentimentIndicator = document.createElement('span');
                sentimentIndicator.className = `sentiment-indicator ${item.sentiment.toLowerCase()}`;
                
                const sentimentText = document.createElement('span');
                sentimentText.textContent = `${item.sentiment} (${item.confidence}%)`;
                
                historySentiment.appendChild(sentimentIndicator);
                historySentiment.appendChild(sentimentText);
                
                const historyTimestamp = document.createElement('div');
                historyTimestamp.className = 'history-timestamp';
                historyTimestamp.textContent = item.timestamp;
                historyTimestamp.style.fontSize = '0.8rem';
                historyTimestamp.style.color = 'var(--text-secondary)';
                
                historyItem.appendChild(historyText);
                historyItem.appendChild(historySentiment);
                historyItem.appendChild(historyTimestamp);
                
                // Add click event to reload this analysis
                historyItem.style.cursor = 'pointer';
                historyItem.addEventListener('click', () => {
                    document.getElementById('text-input').value = item.fullText;
                    analyzeSentiment();
                });
                
                historyList.appendChild(historyItem);
            });
            
            historySection.style.display = 'block';
        }
        
        function clearHistory() {
            if (confirm('Are you sure you want to clear your analysis history?')) {
                analysisHistory = [];
                localStorage.removeItem('sentimentAnalysisHistory');
                updateHistoryDisplay();
            }
        }
        
        function openTab(tabId) {
            // Hide all tab contents
            const tabContents = document.getElementsByClassName('tab-content');
            for (let i = 0; i < tabContents.length; i++) {
                tabContents[i].classList.remove('active');
            }
            
            // Remove active class from all tabs
            const tabs = document.getElementsByClassName('tab');
            for (let i = 0; i < tabs.length; i++) {
                tabs[i].classList.remove('active');
            }
            
            // Show the selected tab content and mark tab as active
            document.getElementById(tabId).classList.add('active');
            event.currentTarget.classList.add('active');
            
            // If opening history tab, make sure it's updated
            if (tabId === 'history-tab') {
                updateHistoryDisplay();
            }
        }
        
        function exportResults() {
            const textInput = document.getElementById('text-input').value;
            const sentiment = document.getElementById('sentiment-text').textContent;
            const confidence = document.getElementById('confidence-text').textContent;
            const positiveScore = document.getElementById('positive-score').textContent;
            const negativeScore = document.getElementById('negative-score').textContent;
            const neutralScore = document.getElementById('neutral-score').textContent;
            const compoundScore = document.getElementById('compound-score').textContent;
            const subjectivity = document.getElementById('subjectivity-score').textContent;
            const intensity = document.getElementById('emotional-intensity').textContent;
            const wordCount = document.getElementById('word-count').textContent;
            const readingTime = document.getElementById('reading-time').textContent;
            
            const exportData = `
Sentiment Analysis Results
==========================

Text: ${textInput}

Overall Sentiment: ${sentiment}
${confidence}

Detailed Scores:
- Positive: ${positiveScore}
- Negative: ${negativeScore}
- Neutral: ${neutralScore}
- Compound: ${compoundScore}

Additional Metrics:
- Subjectivity: ${subjectivity}
- Emotional Intensity: ${intensity}
- Word Count: ${wordCount}
- Reading Time: ${readingTime}

Generated on: ${new Date().toLocaleString()}
            `;
            
            // Create and download file
            const blob = new Blob([exportData], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'sentiment-analysis-results.txt';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }
        
        function exportHistory() {
            if (analysisHistory.length === 0) {
                alert('No history to export.');
                return;
            }
            
            let exportData = 'Sentiment Analysis History\n';
            exportData += '========================\n\n';
            
            analysisHistory.forEach((item, index) => {
                exportData += `Analysis #${index + 1}\n`;
                exportData += `Text: ${item.fullText}\n`;
                exportData += `Sentiment: ${item.sentiment} (${item.confidence}% confidence)\n`;
                exportData += `Date: ${item.timestamp}\n\n`;
            });
            
            exportData += `Exported on: ${new Date().toLocaleString()}`;
            
            // Create and download file
            const blob = new Blob([exportData], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'sentiment-analysis-history.txt';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }
    </script>
</body>
</html>
